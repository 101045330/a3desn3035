name: Deploy & Update README to GitHub Pages

on:
  push:
    branches:
      - main  # Trigger workflow when pushing to the main branch
  workflow_dispatch: # Allow manual trigger as well

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
    # 1. Checkout the repository
    - name: Checkout Repository
      uses: actions/checkout@v4

    # 2. Generate a new interesting README
    - name: Generate new interesting README
      run: |
        echo "## 🚀 Welcome to My Repository" > README.md
        echo "" >> README.md
        echo "- ✨ This version was autogenerated with creativity on $(date)" >> README.md
        echo "- 🛠️ Deployment triggered automatically via GitHub Actions." >> README.md
        echo "- 📚 Fun fact: $(shuf -n 1 /usr/share/dict/words)" >> README.md

    # 3. Commit the changes
    - name: Commit & Push Changes
      run: |
        git config --local user.name "github-actions"
        git config --local user.email "github-actions@github.com"
        git add README.md
        git commit -m "✨ Dynamically updated README with creativity!"
        git push

    # 4. Set up GitHub Pages deployment
    - name: Deploy to GitHub Pages
      uses: peaceiris/actions-gh-pages@v3
      with:
        github_token: ${{ secrets.GITHUB_TOKEN }}
        publish_dir: ./  # Publish the root directory
